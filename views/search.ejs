<% include ./partials/header %>

<div class="search-box">
  <form action="/showResults" method="GET">
      <div class="input-box">
        <input style="width:90%;display:inline-block;margin-right:10px;" type="text" placeholder="Search" name="search">
        <i style="font-size:28px;" class="fas fa-microphone"></i>
      </div>
      <input class="search" type="submit" value="Search">
  </form>
</div>

<script>
    window.SpeechRecognition = window.webkitSpeechRecognition || window.SpeechRecognition;
    const recognition = new SpeechRecognition();
    const icon = document.querySelector('i');
    const inputElem = document.querySelector('.input-box input[type="text"]');

    icon.addEventListener('click', () => {
      dictate();
    });

    const dictate = () => {
      recognition.start();
      recognition.onresult = (event) => {
        const speechToText = event.results[0][0].transcript;
        inputElem.value = speechToText;
        console.log(speechToText);
      }
    }
</script>

<% include ./partials/script %>
<% include ./partials/footer %>